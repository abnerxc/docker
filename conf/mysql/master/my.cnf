# Copyright (c) 2017, Oracle and/or its affiliates. All rights reserved.
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; version 2 of the License.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA

#
# The MySQL  Server configuration file.
#
# For explanations see
# http://dev.mysql.com/doc/mysql/en/server-system-variables.html

[mysqld]
pid-file        = /var/run/mysqld/mysqld.pid
socket          = /var/run/mysqld/mysqld.sock
datadir         = /var/lib/mysql
secure-file-priv= NULL
lower_case_table_names  = 1
# 主数据库端ID号
server_id = 101
# # 开启GTID模式
gtid-mode = ON
enforce-gtid-consistency = 1
# # 开启二进制日志
log-bin = mysql-bin
# # 不需要复制的数据库名（mysql库一般不同步）
binlog-ignore-db = mysql
# # 为每个session 分配的内存，在事务过程中用来存储二进制日志的缓存
binlog_cache_size = 1M
# # 二进制日志自动删除的天数，默认值为0,表示“没有自动删除”，启动时和二进制日志循环时可能删除
expire_logs_days = 7
# # 将函数复制到slave
log_bin_trust_function_creators = 1
# # 主从复制的格式（mixed,statement,row，默认格式是statement）
binlog_format = mixed
# # 跳过主从复制中遇到的所有错误或指定类型的错误，避免slave端复制中断。
# # 如：1062错误是指一些主键重复，1032错误是因为主从数据库数据不一致
slave_skip_errors = 1062
# # log_slave_updates表示slave将复制事件写进自己的二进制日志
log_slave_updates = ON



# Custom config should go here
!includedir /etc/mysql/conf.d/